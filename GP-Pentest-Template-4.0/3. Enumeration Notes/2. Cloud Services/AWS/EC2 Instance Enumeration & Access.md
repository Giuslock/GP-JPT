### 2.1 EC2 Enumeration & SSM Session

- **Describe EC2 instance details**  
   ```bash
   aws ec2 describe-instances --instance-ids <INSTANCE_ID> --profile <PROFILE_NAME>
   ```

- **Start an SSM session on the EC2 instance**  
   (Make sure the Session Manager plugin is installed)
   ```bash
   aws ssm start-session --target <INSTANCE_ID> --profile <PROFILE_NAME>
   ```

### 2.2 EC2 Instance Profile & IAM Role Enumeration

- **Retrieve instance profile via EC2 metadata service**  
   ```bash
   curl http://169.254.169.254/latest/meta-data/iam/security-credentials
   ```

- **Retrieve instance profile via AWS CLI**  
   ```bash
   aws ec2 describe-instances --instance-ids <INSTANCE_ID> --query "Reservations[].Instances[].IamInstanceProfile" --profile <PROFILE_NAME>
   ```

- **Get role associated with instance profile**  
   ```bash
   aws iam get-instance-profile --instance-profile-name <INSTANCE_PROFILE_NAME> --query 'InstanceProfile.Roles[0].[RoleName, Arn]' --profile <PROFILE_NAME>
   ```

---
